function F(){}var AJAX=function(){var t=function(t,e,a,i,o){n(t,"GET",e,a,i,o)},e=function(t,e,a,i,o){n(t,"POST",e,a,i,o)},n=function(t,e,n,a,i,o){var r=t.indexOf("?")>-1?t:t+"?";if(o)for(var s in o)r+=s+"="+o[s]+"&";var c=i?i:function(t){i?i(t):alert(JSON.stringify(t))};$.ajax({type:e,url:r,data:n,success:a,error:c,dataType:"json"})},a="API_URL";return{get:t,post:e,ajax:n,base:{API_URL:a},api:{SENDSMS:"/api/"+a+"/common/verifyCode",LOGIN:"/login",USER_INFO:"/api/"+a+"/user/info",UPDATE_PHONE:"/api/"+a+"/user/updatePhone",UPDATE_USEINFO:"/api/"+a+"/user/updateUseInfo",COUPON_LIST:"/api/"+a+"/coupon/list",COUPON_EXCHANGE:"/api/"+a+"/coupon/exchange",PAY_ORDER:"/api/"+a+"/pay/order",PAY_ORDER_INIT:"/api/"+a+"/pay/orderInit",STORE_INFO:"/api/"+a+"/store/info"}}};Date.prototype.format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in e)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[n]:("00"+e[n]).substr((""+e[n]).length)));return t};var EventEmitter=function(){this.events=[]};EventEmitter.prototype.addEventListener=function(t,e){this.events.push({type:t,callback:e})},EventEmitter.prototype.dispatchEvent=function(t,e){for(var n=0;n<this.events.length;n++)this.events[n].type==t&&this.events[n].callback.apply(this,[e])};var Pager=function(t){EventEmitter.apply(this),this.pageNow=1,this.pageSize=10,this.options={pageNow:1,pageSize:10},t&&(t.pageNow&&(this.options.pageNow=t.pageNow,this.pageNow=t.pageNow),t.pageSize&&(this.options.pageSize=t.pageSize,this.pageSize=t.pageSize))};F.prototype=EventEmitter.prototype,Pager.prototype=new F,Pager.prototype.init=function(){this.getData=function(){},this.getData()},Pager.prototype.nextPage=function(){this.pageNow<this.pageCount&&(this.pageNow++,this.getData())},Pager.prototype.prevPage=function(){this.pageNow>1&&(this.pageNow--,this.getData())},Pager.prototype.gotoPage=function(t){t<=this.pageCount&&(this.pageNow=t,this.getData())},Pager.prototype.hasNext=function(){return this.pageNow<this.pageCount},Pager.prototype.hasPrev=function(){return this.pageNow>1},Pager.prototype.refresh=function(){this.getData()},function(t,e){var n=t.documentElement,a=navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),i=a?Math.min(e.devicePixelRatio,3):1,o="orientationchange"in window?"orientationchange":"resize";i=window.top===window.self?i:1,n.dataset.dpr=i;var r=function(){var t=n.clientWidth;t/i>750&&(t=750*i),n.dataset.width=t,n.dataset.percent=100*(t/750),n.style.fontSize=100*(t/750)+"px"};r(),t.addEventListener&&e.addEventListener(o,r,!1)}(document,window);var Util=function(){var isEmail=function(t){var e=/^(.+)@(.+)\.(.+)$/,n=e.test(t);return n},isCardNo=function(t){var e=/^(\d{15}$|^\d{18}$|^\d{17}(\d|X|x))$/;return e.test(t)},isLenNum=function(arg,num){var reg=eval("/^\\d{"+num+"}$/");return reg.test(arg)},isBankCard=function(arg){var reg=eval("/^\\d{15,20}$/");return reg.test(arg)},isPhone=function(t){return t.match(/^[1](\d{10})$/)},isSMSCode=function(t){return t.match(/^\d{6}$/)},isEmptyData=function(t){return""===t||null===t||void 0===t||"undefined"===t},getQueryString=function(t){t&&(t=t.substr(t.indexOf("?")+1));for(var e,n={},a=t||location.search.substring(1),i=/([^&=]+)=([^&]*)/g;e=i.exec(a);)n[decodeURIComponent(e[1])]=decodeURIComponent(e[2]);return n},add=function(t,e){var n,a,i;try{n=t.toString().split(".")[1].length}catch(o){n=0}try{a=e.toString().split(".")[1].length}catch(o){a=0}return i=Math.pow(10,Math.max(n,a)),(mul(t,i)+mul(e,i))/i},sub=function(t,e){var n,a,i;try{n=t.toString().split(".")[1].length}catch(o){n=0}try{a=e.toString().split(".")[1].length}catch(o){a=0}return i=Math.pow(10,Math.max(n,a)),(mul(t,i)-mul(e,i))/i},mul=function(t,e){var n=0,a=t.toString(),i=e.toString();try{n+=a.split(".")[1].length}catch(o){}try{n+=i.split(".")[1].length}catch(o){}return Number(a.replace(".",""))*Number(i.replace(".",""))/Math.pow(10,n)},div=function(t,e){var n,a,i=0,o=0;try{i=t.toString().split(".")[1].length}catch(r){}try{o=e.toString().split(".")[1].length}catch(r){}return n=Number(t.toString().replace(".","")),a=Number(e.toString().replace(".","")),mul(n/a,Math.pow(10,o-i))},isWX=function(){var t=navigator.userAgent.toLowerCase();return"micromessenger"==t.match(/MicroMessenger/i)},goWXUrl=function(t,e,n){n=n||location.href,n=encodeURIComponent(n),e=e||"snsapi_userinfo",isWX()&&(location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+t+"&redirect_uri=https://wechat.alpha.dragonfitness.cn/wx/getCode&response_type=code&scope="+e+"&state="+n+"#wechat_redirect")},authPass=function(){var t=$("#appID").val(),e=$("#isLogin").val(),n=getQueryString(),a=n.scope;return"login"===e||(a?goWXUrl(t,a):goWXUrl(t,"snsapi_base"),!1)};return{isEmail:isEmail,isPhone:isPhone,isSMSCode:isSMSCode,isCardNo:isCardNo,isLenNum:isLenNum,isEmptyData:isEmptyData,add:add,sub:sub,mul:mul,div:div,getQueryString:getQueryString,isBankCard:isBankCard,isWX:isWX,authPass:authPass}},UI=function(){if(!t)var t=new AJAX;if(!e)var e=new Util;var n=function(t){var e={tsinfo:"",btxt1:"确定",btxt2:"取消",successCB:function(){},cancelCB:function(){}};e=$.extend(e,t);var n='<div class="overLayer"><div class="overLayerWrap">\t<div class="promptTxt">'+e.tsinfo+'</div>\t<p class="tc">';""!==e.btxt2&&(n+='<span class="btns btnCancel">'+e.btxt2+"</span>"),""!==e.btxt1&&(n+='<span class="btns btnSure">'+e.btxt1+"</span>"),n+="\t</p></div></div>",$("body").append(n),$(".overLayer").off("click",".btnSure"),$(".overLayer").off("click",".btnCancel"),$(".overLayer").on("click",".btnSure",function(){"function"==typeof e.successCB&&(e.successCB(),$(".overLayer,.shade").remove())}),$(".overLayer").on("click",".btnCancel",function(){"function"==typeof e.cancelCB&&(e.cancelCB(),$(".overLayer,.shade").remove())})},a=function(t,e){e=e||!0,e&&$("html,body").animate({scrollTop:$(t).offset().top},400)},i=function(){t.post(t.api.LOGIN_OUT,{},function(t){console.log(t),"1"==t.status.code?window.location="/":alert("退出失败")},function(t){alert("退出失败")})};return{logout:i,promptLayer:n,scrollToForm:a}};